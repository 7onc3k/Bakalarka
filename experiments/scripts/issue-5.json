{"body":"## Scope\n\nAdd payment_received and invoice_cancelled event handling to transition function.\n\n## Relevant AC from spec (#1)\n\n**Payment:**\n\n- Given any state except WRITTEN_OFF, PAID, CANCELLED\n  When payment_received → transition to PAID\n- Given SUSPENDED state\n  When payment_received → PAID + resume_service()\n\n**Terminal states:**\n\n- PAID, WRITTEN_OFF, CANCELLED accept no further transitions\n\n**Invoice cancellation:**\n\n- Given any state except PAID, WRITTEN_OFF, CANCELLED\n  When invoice_cancelled → transition to CANCELLED\n- Given SUSPENDED state\n  When invoice_cancelled → CANCELLED + resume_service()\n\n## Files\n\n- `src/transition.ts` — extend transition function\n- `tests/transition.test.ts` — extend tests\n\n## Dependencies\n\n- Depends on: #4 (core state machine — happy path)\n\nRefs #1","labels":[],"number":5,"title":"feat(state-machine): implement payment and cancellation"}
